import pandas as pd
import numpy as np
import sklearn
from sklearn.feature_selection import SelectFromModel
from sklearn.ensemble import ExtraTreesClassifier
from sklearn.model_selection import train_test_split
from sklearn import model_selection

from MalwareDataFileRead import *


def malware_future_select():

    # データファイルの読み込み
    x_obj_2, y_obj, malware_dataset = malware_data_read()

    # ここから重要度の高い特徴量の出力処理
    # 変形
    feature_obj = x_obj_2.shape[1]

    # 重要度をリストで抽出
    fi_obj = ExtraTreesClassifier().fit(x_obj_2, y_obj).feature_importances_

    # 重要度の高い順にソート処理
    index_obj = np.argsort(fi_obj)[::-1][:feature_obj]

    # 重要度の高い順に、特徴量の名前と重要度を出力
    for feat in range(feature_obj):
        print("Feature:{} Importance: {:.5f}".format(malware_dataset.columns[2 + index_obj[feat]]
                                                     .ljust(30), fi_obj[index_obj[feat]]))
